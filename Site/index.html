<!DOCTYPE html>
<html lang="en">
<head>
	<title>MowHome Automation Center</title>
	
    <style type="text/css"> 
		.Toggle {
			font-size: xx-large;
			height: 20%;
			width: 30%;
		}
		.Selector {
			font-size: 5ex;
			height: 15%;
			width: 30%;
		}
	</style>
	<style type="text/css">
  #container { position: relative; padding: 6px; background-color: #eeeeee; width: 420px; height:220px; }
</style>
    
<!-- Dependencies --> 
<script src="../AutoHome.js" ></script>

<script src="http://yui.yahooapis.com/2.9.0/build/utilities/utilities.js" ></script>
<script src="http://yui.yahooapis.com/2.9.0/build/slider/slider-min.js" ></script>
 
<!-- Color Picker source files for CSS and JavaScript -->
<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/2.9.0/build/colorpicker/assets/skins/sam/colorpicker.css">
<script src="http://yui.yahooapis.com/2.9.0/build/colorpicker/colorpicker-min.js" ></script>
    	
<script>

(function() {
    var Event = YAHOO.util.Event, picker;
 
    Event.onDOMReady(function() {
			YAHOO.log("Creating Color Picker.", "info", "example");
            picker = new YAHOO.widget.ColorPicker("container", {
                    showhsvcontrols: true,
                    showhexcontrols: true,
					images: {
						PICKER_THUMB: "assets/picker_thumb.png",
						HUE_THUMB: "assets/hue_thumb.png"
    				}
                });
			YAHOO.log("Finished creating Color Picker.", "info", "example");
			
			//a listener for logging RGB color changes;
			//this will only be visible if logger is enabled:
			var onRgbChange = function(o) {
				sendCmd("4[c"+picker.get("hex")+"]");
			}
			
			//subscribe to the rgbChange event;
			picker.on("rgbChange", throttle(onRgbChange,1));
			
			//use setValue to reset the value to white:
			Event.on("reset", "click", function(e) {
				picker.setValue([255, 255, 255], false); //false here means that rgbChange
													     //wil fire; true would silence it
			});
			
			//use the "get" method to get the current value
			//of one of the Color Picker's properties; in 
			//this case, we'll get the hex value and write it
			//to the log:
			Event.on("gethex", "click", function(e) {
				sendCmd("2*"+picket.get("hex"));
				YAHOO.log("Current hex value: " + picker.get("hex"), "info", "example"); 
			});
        });
})();


function throttle(func, wait) {
    var timeout;
    return function() {
        var context = this, args = arguments;
        if (!timeout) {
            // the first time the event fires, we setup a timer, which 
            // is used as a guard to block subsequent calls; once the 
            // timer's handler fires, we reset it and create a new one
            timeout = setTimeout(function() {
                timeout = null;
                func.apply(context, args);
            }, wait);
        }
    }
}

</script>






</head>
<body bgcolor="#494949" class="yui-skin-sam">
</body>
<CENTER> 

<div id="myDiv">



<!--We'll use these to trigger interactions with the Color Picker
<button id="reset">Reset Color to White</button>
<button id="gethex">Write current hex value to the Logger</button> 
API -->

        
	<form action="" id="toggle">
		<button type="button" onclick ="sendCmd(this.value)" value ="2[o]" class="Toggle" style= "width: 30%; color: #3CF; background-color: #009E27;">ON/OFF</button>
	</form>
        
    <form action="" id="timer"> 
        <select name="timer" class="Selector" onChange="sendCmd(this.options[this.selectedIndex].value)">
          <option value=""selected>Set Timer(min)</option> 
          <option value="2[t0]">Reset</option> 
          <option value="2[t3]">3</option> 
          <option value="2[t4]">4</option> 
          <option value="2[t5]">5</option> 
          <option value="2[t7]">7</option> 
          <option value="2[t10]">10</option> 
        </select> 
    </form> 
    
    <form action="" id="fan"> 
        <select name="fan" class="Selector" onChange="sendCmd(this.options[this.selectedIndex].value)">
          <option value=""selected>Set Fan Speed</option> 
          <option value="2[f1]">1</option> 
          <option value="2[f2]">2</option> 
          <option value="2[f3]">3</option> 
          <option value="2[f4]">Auto</option> 
        </select> 
    </form> 

    <br>
    <br>
    <hr>

    <form action="" id="light_on_off">
		<button type="button" onclick ="sendCmd(this.value)" value ="4[l1]" class="Toggle" style= "width: 30%; color: #3CF; background-color: #009E27;">ON</button>
		<button type="button" onclick ="sendCmd(this.value)" value ="4[l0]" class="Toggle" style= "width: 30%; color: #3CF; background-color: #009E27;">OFF</button>
	</form>  
	    <form action="" id="random_fade">
		<button type="button" onclick ="sendCmd(this.value)" value ="4[f]" class="Toggle" style= "width: 30%; color: #3CF; background-color: #009E27;">Random Color</button>
	</form> 
	
	<div id="container">
	<!--Color Picker will appear here-->
	</div>
  

  	<hr>
    <br>
    <br>
      <form action="" name="customInput">
        <input type="text" name="msg">
		<button type="button" onclick ="sendCmd(document.customInput.msg.value)"  >Send</button>
    </form>




</CENTER>
</body>
</html>

